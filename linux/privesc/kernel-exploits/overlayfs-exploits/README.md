# OverlayFs Exploits

## Theory

The [overlay file system](https://docs.kernel.org/filesystems/overlayfs.html) (often abbreviated as OverlayFS) allows a user to "merge" several mount points into a unified file system resulting in single directory structure that contains underlying files and sub-directories from all sources. Common applications overlay a read/write partition over a read-only partition, such as with LiveCDs and IoT devices with limited flash memory write cycles.

An overlay filesystem combines two filesystems - an 'upper' filesystem and a 'lower' filesystem. When a name exists in both filesystems, the object in the 'upper' filesystem is visible while the object in the 'lower' filesystem is either hidden or, in the case of directories, merged with the 'upper' object.

It would be more correct to refer to an upper and lower 'directory tree' rather than 'filesystem' as it is quite possible for both directory trees to be in the same filesystem and there is no requirement that the root of a filesystem be given for either upper or lower.

## Practice

{% content-ref url="gameoverlayfs.md" %}
[gameoverlayfs.md](gameoverlayfs.md)
{% endcontent-ref %}

{% content-ref url="cve-2023-0386-overlayfs.md" %}
[cve-2023-0386-overlayfs.md](cve-2023-0386-overlayfs.md)
{% endcontent-ref %}

{% content-ref url="cve-2021-3493.md" %}
[cve-2021-3493.md](cve-2021-3493.md)
{% endcontent-ref %}

## Resources

{% embed url="https://en.wikipedia.org/wiki/OverlayFS" %}

{% embed url="https://docs.kernel.org/filesystems/overlayfs.html" %}
